{% extends 'base_content.html' %}
{% load bootstrap_pagination %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-12">
      <h1>Clubs</h1>
      {% bootstrap_paginate page_obj range=6 previous_label="Previous" next_label="Next" show_first_last="true" %}
      <table class="table">
        {% for club in clubs %}
          <tr>
            <td>
              <img src="{{ user.mini_gravatar }}" alt="Gravatar of {{ club.name }}" class="rounded-circle" >
            </td>
            <td>{{ club.name }}</td>
            <td>{{ club.leader }}</td>
            <td><a href="{% url 'show_club' club.id %}"><button type="button" class="btn btn-info">View</button></a></td>
            <td>
                {% if user in club.members.all %}
                <form action="{% url 'join_club' user.id club.id %}" method="post">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-primary">Leave</button>
              </form>
                {% else %}
                  <form action="{% url 'join_club' user.id club.id %}" method="post">
                    {% csrf_token %}
                      <button type="submit" class="btn btn-primary">Join</button>
                  </form>
                {% endif %}
            </td>
          </tr>
        {% endfor %}
      </table>
      {% bootstrap_paginate page_obj range=6 previous_label="Previous" next_label="Next" show_first_last="true" %}
    </div>
  </div>
</div>

{% endblock %}
