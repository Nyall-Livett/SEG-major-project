{% extends 'base_content.html' %}
{% block content %}

<div class="container">
  <div class="main-body">
      <div class="page-content page-container" id="page-content">
          <div class="row container d-flex justify-content-center">
              <div>
                  <div class="card user-card-full">
                      <div class="row m-l-0 m-r-0">
                          <div class="col-sm-4 bg-c-lite-green user-profile">
                              <div class="card-block text-center text-white">
                                  <div class="m-b-25"> <img src="{{ user.gravatar }}"
                                          alt="Gravatar of {{ user.username }}" class="rounded-circle"> </div>

                                  {% if user.id == request.user.id %}
                                  <div class="row">
                                      <div class="col-sm-12 col-md-8 offset-md-2">
                                          <a href={% url 'profile'  %}>
                                              <button type="button" class="btn btn-primary">Edit profile</button>
                                          </a>
                                          <br><br>
                                          {% include 'partials/follow_unfollow.html' with following=following request_sent=request_sent %}
                                      </div>
                                  </div>

                                  {% else %}
                                    <h3 class="f-w-600">{{user.first_name}} {{user.last_name}}</h3>
                                    {% include 'partials/follow_unfollow.html' with following=following request_sent=request_sent %}
                                  {% endif %}
                              </div>
                          </div>
                          <div class="col-sm-8">
                              <div class="card-block">
                                  <h4 class="m-b-20 p-b-5 b-b-default f-w-600">Profile</h4>
                                  <div>
                                      <h5 class="m-b-10 f-w-600">Email:</h5>
                                      <p class="text-muted">{{user.email}}</p>
                                  </div>

                                  <div>
                                      <h5 class="m-b-10 f-w-600">Bio:</h5>
                                      <p class="text-muted">{{user.bio}}</p>
                                  </div>

                                  {% if following or user.id == request.user.id %}
                                  <br>
                                  <br>
                                  <div>
                                    <h5 class="m-b-10 f-w-600">Clubs joined:</h5>
                                    {% for club in user.clubs.all %}
                                    <m class= "text-muted">{{ club.name }}, </m>
                                    {% endfor %}
                                  </div>
                                  <br>
                                  <div>
                                      <h5 class="m-b-10 f-w-600">Favourite Book:</h5>
                                      <p class="text-muted">{{user.favourite_book}}</p>
                                  </div>
                                  <div>
                                      <h5 class="m-b-10 f-w-600">Favourite Character:</h5>
                                      <p class="text-muted">{{user.favourite_character}}</p>
                                  </div>
                                  <div>
                                      <h5 class="m-b-10 f-w-600">Favourite Genre:</h5>
                                      <p class="text-muted">{{user.favourite_genre}}</p>
                                  </div>
                                  <div>
                                      <h5 class="m-b-10 f-w-600">Favourite Author:</h5>
                                      <p class="text-muted">{{user.favourite_author}}</p>
                                  </div>
                                  <div>
                                      <h5 class="m-b-10 f-w-600">Want to read next:</h5>
                                      <p class="text-muted">{{user.want_to_read_next}}</p>
                                  </div>
                                  {% endif %}



                              </div>
                          </div>
                      </div>
                  </div>
              </div>
              <a class="btn btn-danger" style="float: right;" href = "{% url 'delete_account' user.id %}">Delete Account</a>
          </div>
      </div>
  </div>
</div>


{% endblock %}
